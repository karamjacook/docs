# Universal Agent API Documentation

## Endpoint

```
POST https://api.loomlay.com/api:yWCgta9k/action/agent
```

## Headers

```json
{
  "Content-Type": "application/json"
}
```

## Request Schema

### Complete JSON Schema

```json
{
  "type": "object",
  "required": ["prompt", "model"],
  "properties": {
    "prompt": {
      "type": "string",
      "description": "The main task or question for the agent to execute",
      "minLength": 1,
      "example": "Analyze the latest AI trends and create a summary report"
    },
    "model": {
      "type": "object",
      "required": ["provider", "name", "apiKey"],
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["openrouter", "openai", "anthropic", "google", "deepseek"],
          "description": "LLM provider (OpenRouter recommended for widest model selection)"
        },
        "name": {
          "type": "string",
          "description": "Model identifier",
          "examples": [
            "anthropic/claude-sonnet-4",
            "anthropic/claude-opus-4",
            "openai/gpt-4o",
            "openai/gpt-4-turbo",
            "google/gemini-2.0-flash-exp",
            "deepseek/deepseek-r1"
          ]
        },
        "apiKey": {
          "type": "string",
          "description": "API key for the provider",
          "pattern": "^sk-"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "default": 0.7,
          "description": "Sampling temperature"
        },
        "maxTokens": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum tokens in response"
        },
        "topP": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Nucleus sampling parameter"
        },
        "reasoningEffort": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "For reasoning models (o1, o3, deepseek-r1, etc.)"
        }
      }
    },
    "system": {
      "type": "string",
      "description": "System prompt to guide agent behavior",
      "default": "You are a helpful AI assistant."
    },
    "execution": {
      "type": "object",
      "properties": {
        "maxSteps": {
          "type": "integer",
          "minimum": 1,
          "maximum": 50,
          "default": 10,
          "description": "Maximum agentic steps (tool calls + responses)"
        },
        "mode": {
          "type": "string",
          "enum": ["fast", "thorough", "deep"],
          "default": "thorough",
          "description": "Execution mode affecting prompt augmentation"
        },
        "enableSubagents": {
          "type": "boolean",
          "default": true,
          "description": "Enable the execute_subagent tool"
        },
        "maxSubagentDepth": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "default": 3,
          "description": "Maximum nesting depth for subagents"
        }
      }
    },
    "output": {
      "type": "object",
      "properties": {
        "format": {
          "type": "string",
          "enum": ["text", "structured"],
          "default": "text",
          "description": "Output format"
        },
        "schema": {
          "type": "object",
          "description": "JSON Schema for structured output (required if format=structured)",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["object", "array", "string", "number", "boolean"]
            },
            "properties": {
              "type": "object",
              "description": "Schema properties for object type"
            },
            "required": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Required property names"
            },
            "items": {
              "type": "object",
              "description": "Schema for array items"
            }
          }
        },
        "verbosity": {
          "type": "string",
          "enum": ["minimal", "standard", "detailed"],
          "default": "standard",
          "description": "Log verbosity level"
        },
        "includeReasoning": {
          "type": "boolean",
          "default": true,
          "description": "Include reasoning tokens in response"
        }
      }
    },
    "tools": {
      "type": "array",
      "description": "Custom HTTP/webhook tools",
      "items": {
        "type": "object",
        "required": ["id", "type"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique tool identifier"
          },
          "name": {
            "type": "string",
            "description": "Display name for the tool"
          },
          "type": {
            "type": "string",
            "enum": ["http", "webhook"],
            "description": "Tool type"
          },
          "description": {
            "type": "string",
            "description": "Tool description for the LLM"
          },
          "enabled": {
            "type": "boolean",
            "default": true
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Endpoint URL (supports {variable} interpolation)"
          },
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "DELETE", "PATCH"],
            "default": "GET"
          },
          "headers": {
            "type": "object",
            "description": "HTTP headers"
          },
          "body": {
            "type": "object",
            "description": "Request body template (supports {variable} interpolation)"
          },
          "inputSchema": {
            "type": "object",
            "description": "JSON Schema defining tool parameters"
          },
          "maxRetries": {
            "type": "integer",
            "default": 3,
            "description": "Max retries for webhook type"
          }
        }
      }
    },
    "mcpServers": {
      "type": "array",
      "description": "Model Context Protocol servers for external tool integrations",
      "items": {
        "type": "object",
        "required": ["name", "url"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Server identifier"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Server URL (SSE endpoint)"
          },
          "transport": {
            "type": "string",
            "enum": ["sse"],
            "default": "sse",
            "description": "Transport protocol (currently only SSE supported)"
          }
        }
      }
    },
    "x402": {
      "type": "object",
      "description": "X402 blockchain payment protocol configuration",
      "required": ["privateKey"],
      "properties": {
        "privateKey": {
          "type": "string",
          "description": "Ethereum private key for payments",
          "pattern": "^0x[a-fA-F0-9]{64}$"
        },
        "network": {
          "type": "string",
          "enum": [
            "base",
            "base-mainnet",
            "base-sepolia",
            "ethereum",
            "ethereum-mainnet",
            "sepolia"
          ],
          "default": "base",
          "description": "Blockchain network"
        },
        "facilitatorUrl": {
          "type": "string",
          "format": "uri",
          "default": "https://x402.org/facilitator",
          "description": "X402 facilitator service URL"
        }
      }
    }
  }
}
```

## Response Schema

```json
{
  "type": "object",
  "properties": {
    "success": {
      "type": "boolean",
      "description": "Whether execution succeeded"
    },
    "executionTime": {
      "type": "integer",
      "description": "Total execution time in milliseconds"
    },
    "data": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "description": "Generated text response (for text format)"
        },
        "object": {
          "type": "object",
          "description": "Structured output (for structured format)"
        },
        "usage": {
          "type": "object",
          "properties": {
            "inputTokens": { "type": "integer" },
            "outputTokens": { "type": "integer" },
            "totalTokens": { "type": "integer" },
            "reasoningTokens": { "type": "integer" },
            "cachedInputTokens": { "type": "integer" }
          }
        },
        "tools": {
          "type": "object",
          "properties": {
            "executions": {
              "type": "array",
              "description": "Tool call executions",
              "items": {
                "type": "object",
                "properties": {
                  "toolName": { "type": "string" },
                  "args": { "type": "object" },
                  "result": { "type": "any" }
                }
              }
            },
            "fullResults": {
              "type": "array",
              "description": "Complete tool results with all data",
              "items": {
                "type": "object",
                "properties": {
                  "toolCallId": { "type": "string" },
                  "toolName": { "type": "string" },
                  "result": { "type": "any" }
                }
              }
            },
            "callCount": { "type": "integer" }
          }
        },
        "reasoning": {
          "type": "object",
          "properties": {
            "tokens": { "type": "integer" }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "model": { "type": "string" },
        "provider": { "type": "string" },
        "finishReason": { "type": "string" },
        "mode": { "type": "string" },
        "steps": { "type": "integer" }
      }
    },
    "logs": {
      "type": "array",
      "description": "Complete execution logs (never truncated)",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": { "type": "string", "format": "date-time" },
          "type": { "type": "string" },
          "depth": { "type": "integer" },
          "isSubagent": { "type": "boolean" }
        }
      }
    },
    "error": {
      "type": "object",
      "properties": {
        "message": { "type": "string" },
        "type": { "type": "string" },
        "stack": { "type": "string" },
        "hint": { "type": "string" }
      }
    }
  }
}
```

## Usage Examples

### Example 1: Simple Text Generation with OpenRouter

```json
{
  "prompt": "Explain quantum computing in simple terms",
  "model": {
    "provider": "openrouter",
    "name": "anthropic/claude-sonnet-4",
    "apiKey": "sk-or-v1-xxxxx"
  }
}
```

**Response:**
```json
{
  "success": true,
  "executionTime": 2341,
  "data": {
    "text": "Quantum computing is a revolutionary approach to computation that uses quantum mechanical phenomena like superposition and entanglement. Unlike classical computers that use bits (0 or 1), quantum computers use quantum bits or 'qubits' that can exist in multiple states simultaneously...",
    "usage": {
      "inputTokens": 23,
      "outputTokens": 156,
      "totalTokens": 179
    }
  },
  "metadata": {
    "model": "anthropic/claude-sonnet-4",
    "provider": "openrouter",
    "finishReason": "end_turn",
    "mode": "thorough",
    "steps": 1
  }
}
```

### Example 2: Structured Output - Extract Company Data

```json
{
  "prompt": "Extract company information from: 'Acme Corp, founded in 2020, revenue $5M, CEO John Smith'",
  "model": {
    "provider": "openrouter",
    "name": "openai/gpt-4o",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "output": {
    "format": "structured",
    "schema": {
      "type": "object",
      "properties": {
        "companyName": { "type": "string" },
        "founded": { "type": "number" },
        "revenue": { "type": "string" },
        "ceo": { "type": "string" }
      },
      "required": ["companyName", "founded"]
    }
  }
}
```

**Response:**
```json
{
  "success": true,
  "executionTime": 1823,
  "data": {
    "object": {
      "companyName": "Acme Corp",
      "founded": 2020,
      "revenue": "$5M",
      "ceo": "John Smith"
    },
    "usage": {
      "inputTokens": 45,
      "outputTokens": 28,
      "totalTokens": 73
    }
  },
  "metadata": {
    "model": "openai/gpt-4o",
    "provider": "openrouter",
    "finishReason": "stop"
  }
}
```

### Example 3: Weather Agent with Real API

```json
{
  "prompt": "What's the weather in San Francisco? Should I bring an umbrella?",
  "model": {
    "provider": "openrouter",
    "name": "anthropic/claude-sonnet-4",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "execution": {
    "maxSteps": 5
  },
  "tools": [
    {
      "id": "weather_api",
      "name": "Get Current Weather",
      "type": "http",
      "description": "Get current weather for any city using wttr.in service",
      "url": "https://wttr.in/{city}?format=j1",
      "method": "GET",
      "inputSchema": {
        "type": "object",
        "properties": {
          "city": {
            "type": "string",
            "description": "City name (e.g., 'San Francisco', 'London', 'Tokyo')"
          }
        },
        "required": ["city"]
      }
    }
  ]
}
```

**Response:**
```json
{
  "success": true,
  "executionTime": 3456,
  "data": {
    "text": "Based on the current weather in San Francisco, it's partly cloudy at 62°F with 0% precipitation. You won't need an umbrella today! The conditions are quite pleasant with light winds.",
    "usage": {
      "inputTokens": 89,
      "outputTokens": 67,
      "totalTokens": 156
    },
    "tools": {
      "executions": [
        {
          "toolName": "weather_api",
          "args": { "city": "San Francisco" },
          "result": {
            "current_condition": [{
              "temp_F": "62",
              "weatherDesc": [{"value": "Partly cloudy"}],
              "precipMM": "0.0"
            }]
          }
        }
      ],
      "callCount": 1
    }
  }
}
```

### Example 4: Crypto Price Check with Real API

```json
{
  "prompt": "What's the current Bitcoin price in USD? Is it above $100k?",
  "model": {
    "provider": "openrouter",
    "name": "anthropic/claude-sonnet-4",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "tools": [
    {
      "id": "crypto_price",
      "name": "Get Crypto Price",
      "type": "http",
      "description": "Get current cryptocurrency price from CoinGecko",
      "url": "https://api.coingecko.com/api/v3/simple/price?ids={coin_id}&vs_currencies={currency}",
      "method": "GET",
      "inputSchema": {
        "type": "object",
        "properties": {
          "coin_id": {
            "type": "string",
            "description": "Coin ID (bitcoin, ethereum, solana, etc.)"
          },
          "currency": {
            "type": "string",
            "description": "Currency (usd, eur, gbp)"
          }
        },
        "required": ["coin_id", "currency"]
      }
    }
  ]
}
```

### Example 5: Subagent Delegation

```json
{
  "prompt": "Research and write short articles about: AI trends, quantum computing, and blockchain technology",
  "model": {
    "provider": "openrouter",
    "name": "anthropic/claude-sonnet-4",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "system": "You are a technology journalist. Use subagents to research different topics independently.",
  "execution": {
    "enableSubagents": true,
    "maxSubagentDepth": 2,
    "maxSteps": 15,
    "mode": "thorough"
  },
  "output": {
    "verbosity": "standard"
  }
}
```

**Response:**
```json
{
  "success": true,
  "executionTime": 18432,
  "data": {
    "text": "# Technology Research Report\n\n## AI Trends\n[Complete article from subagent 1]\n\n## Quantum Computing\n[Complete article from subagent 2]\n\n## Blockchain Technology\n[Complete article from subagent 3]",
    "usage": {
      "inputTokens": 623,
      "outputTokens": 1847,
      "totalTokens": 2470
    },
    "tools": {
      "executions": [
        {
          "toolName": "execute_subagent",
          "args": {
            "prompt": "Write a 300-word article about current AI trends"
          },
          "result": {
            "success": true,
            "text": "[Complete AI trends article]",
            "usage": { "inputTokens": 45, "outputTokens": 356 }
          }
        },
        {
          "toolName": "execute_subagent",
          "args": {
            "prompt": "Write a 300-word article about quantum computing advances"
          },
          "result": {
            "success": true,
            "text": "[Complete quantum computing article]",
            "usage": { "inputTokens": 48, "outputTokens": 389 }
          }
        },
        {
          "toolName": "execute_subagent",
          "args": {
            "prompt": "Write a 300-word article about blockchain technology"
          },
          "result": {
            "success": true,
            "text": "[Complete blockchain article]",
            "usage": { "inputTokens": 42, "outputTokens": 367 }
          }
        }
      ],
      "fullResults": [
        {
          "toolCallId": "toolu_01ABC",
          "toolName": "execute_subagent",
          "result": {
            "success": true,
            "text": "[Complete article text available here]"
          }
        }
      ],
      "callCount": 3
    }
  },
  "logs": [
    {
      "timestamp": "2025-10-31T10:00:00.000Z",
      "type": "execution_start",
      "provider": "openrouter",
      "model": "anthropic/claude-sonnet-4",
      "isSubagent": false,
      "depth": 0
    },
    {
      "timestamp": "2025-10-31T10:00:02.000Z",
      "type": "subagent_start",
      "depth": 1,
      "prompt": "Write a 300-word article about current AI trends"
    },
    {
      "timestamp": "2025-10-31T10:00:08.234Z",
      "type": "subagent_complete",
      "depth": 1,
      "success": true,
      "text": "[Complete AI article text]",
      "usage": { "inputTokens": 45, "outputTokens": 356 }
    }
  ]
}
```

### Example 6: X402 Payment Protocol (Testnet)

```json
{
  "prompt": "Use the paid sentiment analysis API to analyze: 'This product is amazing!'",
  "model": {
    "provider": "openrouter",
    "name": "anthropic/claude-sonnet-4",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "execution": {
    "maxSteps": 5
  },
  "tools": [
    {
      "id": "sentiment_api",
      "name": "Sentiment Analysis API",
      "type": "http",
      "description": "X402-enabled sentiment analysis API (requires payment)",
      "url": "https://example-x402-api.com/analyze",
      "method": "POST",
      "body": {
        "text": "{text}"
      },
      "inputSchema": {
        "type": "object",
        "properties": {
          "text": { "type": "string" }
        },
        "required": ["text"]
      }
    }
  ],
  "x402": {
    "privateKey": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
    "network": "base-sepolia",
    "facilitatorUrl": "https://x402.org/facilitator"
  }
}
```

**Note**: X402 enables micropayments for API access. The agent automatically handles payment when receiving HTTP 402 responses.

### Example 7: GitHub MCP Server Integration

```json
{
  "prompt": "Search my GitHub repositories for issues mentioning 'bug' and list the most recent 5",
  "model": {
    "provider": "openrouter",
    "name": "openai/gpt-4o",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "execution": {
    "maxSteps": 8
  },
  "mcpServers": [
    {
      "name": "github",
      "url": "https://mcp-github-server.example.com/sse"
    }
  ]
}
```

**Note**: MCP (Model Context Protocol) servers expose tools like GitHub, Slack, Notion, etc. You need to deploy your own MCP server or use hosted ones. Visit [MCP Registry](https://registry.modelcontextprotocol.io) for available servers.

### Example 8: Reasoning Model (DeepSeek R1)

```json
{
  "prompt": "Solve this logic puzzle: Three switches control three light bulbs in another room. You can flip the switches but can only enter the room once. How do you determine which switch controls which bulb?",
  "model": {
    "provider": "openrouter",
    "name": "deepseek/deepseek-r1",
    "apiKey": "sk-or-v1-xxxxx",
    "reasoningEffort": "high"
  },
  "output": {
    "includeReasoning": true,
    "verbosity": "detailed"
  }
}
```

**Response includes reasoning tokens:**
```json
{
  "success": true,
  "data": {
    "text": "Here's the solution:\n\n1. Turn on switch 1 and leave it on for 10 minutes\n2. Turn off switch 1, then turn on switch 2\n3. Enter the room\n\nThe bulb that is ON is controlled by switch 2\nThe bulb that is OFF but WARM is controlled by switch 1\nThe bulb that is OFF and COLD is controlled by switch 3",
    "usage": {
      "inputTokens": 67,
      "outputTokens": 89,
      "totalTokens": 156,
      "reasoningTokens": 2847
    },
    "reasoning": {
      "tokens": 2847
    }
  }
}
```

### Example 9: Multi-Tool Workflow - Real APIs

```json
{
  "prompt": "Get the current Bitcoin price and calculate how much 0.5 BTC is worth in EUR",
  "model": {
    "provider": "openrouter",
    "name": "anthropic/claude-sonnet-4",
    "apiKey": "sk-or-v1-xxxxx"
  },
  "execution": {
    "maxSteps": 10
  },
  "tools": [
    {
      "id": "crypto_price",
      "type": "http",
      "description": "Get cryptocurrency prices from CoinGecko",
      "url": "https://api.coingecko.com/api/v3/simple/price?ids={coin}&vs_currencies={currency}",
      "method": "GET",
      "inputSchema": {
        "type": "object",
        "properties": {
          "coin": { "type": "string", "description": "Coin ID (bitcoin, ethereum, etc.)" },
          "currency": { "type": "string", "description": "Currency code (usd, eur, gbp)" }
        },
        "required": ["coin", "currency"]
      }
    },
    {
      "id": "currency_rates",
      "type": "http",
      "description": "Get exchange rates from exchangerate-api.com",
      "url": "https://api.exchangerate-api.com/v4/latest/{base}",
      "method": "GET",
      "inputSchema": {
        "type": "object",
        "properties": {
          "base": { "type": "string", "description": "Base currency (USD, EUR, etc.)" }
        },
        "required": ["base"]
      }
    }
  ]
}
```

## Error Responses

### Validation Error
```json
{
  "success": false,
  "error": {
    "message": "Validation failed: prompt is required, model.apiKey is required",
    "type": "ValidationError",
    "hint": "Check that your request includes all required fields"
  }
}
```

### API Key Error
```json
{
  "success": false,
  "executionTime": 234,
  "error": {
    "message": "Invalid API key",
    "type": "AuthenticationError",
    "hint": "Check that your API key is valid and has necessary permissions"
  },
  "metadata": {
    "provider": "openrouter",
    "model": "anthropic/claude-sonnet-4"
  }
}
```

### Subagent Depth Exceeded
```json
{
  "success": false,
  "executionTime": 1234,
  "error": {
    "message": "Maximum subagent depth (3) exceeded",
    "type": "ExecutionError",
    "hint": "Reduce maxSubagentDepth or simplify the task"
  }
}
```

## Built-in Tools

### X402 Tools (when `x402` config provided)
1. **x402_request** - Make HTTP requests to X402-enabled APIs with automatic payment
2. **x402_check_balance** - Check wallet balance for specified assets
3. **x402_get_wallet** - Get wallet address being used for payments

### Subagent Tool (when `execution.enableSubagents: true`)
1. **execute_subagent** - Delegate tasks to independent subagents with isolated context

### MCP Tools (when `mcpServers` configured)
- Tools loaded dynamically from MCP servers
- Named as `mcp_{server}_{tool_name}`
- Visit [MCP Registry](https://registry.modelcontextprotocol.io) to discover servers

## Rate Limits

Rate limits depend on the underlying LLM provider:
- **OpenRouter**: Depends on your tier (typically 200-2000 requests/min)
- **OpenAI**: Per API key tier (tier 1-5)
- **Anthropic**: Per API key tier
- **Google**: Per project quota

The API endpoint itself has no rate limits.

## Best Practices

1. **Use OpenRouter for flexibility**: Access 200+ models through a single API key
2. **Set appropriate verbosity**: Use "minimal" for production, "detailed" for debugging
3. **Limit max steps**: Set reasonable maxSteps (10-20) to prevent runaway execution
4. **Subagent depth**: Keep maxSubagentDepth ≤ 3 for optimal performance
5. **Tool descriptions**: Write clear, detailed descriptions for custom tools
6. **Error handling**: Always check `success: false` and handle errors gracefully
7. **Structured output**: Use for data extraction and API integrations
8. **X402**: Check balance before making multiple paid API calls
9. **MCP**: Use hosted MCP servers or deploy your own for production
10. **Logs**: Enable detailed logging during development for debugging

## Real-World APIs You Can Use

### Free APIs (No Auth Required)
- **wttr.in** - Weather: `https://wttr.in/{city}?format=j1`
- **ipapi.co** - IP Geolocation: `https://ipapi.co/{ip}/json/`
- **exchangerate-api** - Currency: `https://api.exchangerate-api.com/v4/latest/USD`
- **dog.ceo** - Dog images: `https://dog.ceo/api/breeds/image/random`
- **catfact.ninja** - Cat facts: `https://catfact.ninja/fact`

### Free APIs (API Key Required)
- **CoinGecko** - Crypto prices: Free tier available
- **OpenWeatherMap** - Weather: Free tier 1000 calls/day
- **NewsAPI** - News: Free tier 100 requests/day
- **Alpha Vantage** - Stock data: Free tier 25 requests/day

### MCP Servers
Visit [https://registry.modelcontextprotocol.io](https://registry.modelcontextprotocol.io) for the official registry of MCP servers.

### X402 Facilitators
- **Coinbase CDP**: `https://x402.org/facilitator` (fee-free USDC on Base)
- Test on Base Sepolia testnet before production use

## TypeScript Types

```typescript
interface AgentRequest {
  prompt: string;
  model: ModelConfig;
  system?: string;
  execution?: ExecutionConfig;
  output?: OutputConfig;
  tools?: CustomTool[];
  mcpServers?: MCPServer[];
  x402?: X402Config;
}

interface ModelConfig {
  provider: 'openrouter' | 'openai' | 'anthropic' | 'google' | 'deepseek';
  name: string;
  apiKey: string;
  temperature?: number;
  maxTokens?: number;
  topP?: number;
  reasoningEffort?: 'low' | 'medium' | 'high';
}

interface ExecutionConfig {
  maxSteps?: number;
  mode?: 'fast' | 'thorough' | 'deep';
  enableSubagents?: boolean;
  maxSubagentDepth?: number;
}

interface OutputConfig {
  format?: 'text' | 'structured';
  schema?: JSONSchema;
  verbosity?: 'minimal' | 'standard' | 'detailed';
  includeReasoning?: boolean;
}

interface AgentResponse {
  success: boolean;
  executionTime: number;
  data?: {
    text?: string;
    object?: any;
    usage: TokenUsage;
    tools?: {
      executions: ToolExecution[];
      fullResults: ToolResult[];
      callCount: number;
    };
    reasoning?: { tokens: number };
  };
  metadata: {
    model: string;
    provider: string;
    finishReason: string;
    mode?: string;
    steps?: number;
  };
  logs: Log[];
  error?: ErrorDetails;
}
```
